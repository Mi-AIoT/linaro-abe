{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6df18ffe_01b8541c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000534
      },
      "writtenOn": "2022-06-23T16:20:41Z",
      "side": 1,
      "message": "Hello Maxim,\n\nGDB built by the CI doesn\u0027t load libthread_db.so.1 when running the testsuite, because the auto-load-safe-path setting doesn\u0027t allow it.\n\nThis change adds a flag to configure that sets the default auto-load-safe-path value to include the sysroot directory.",
      "revId": "0db040934c6b7aeccb20e3a36ddfad8b88471238",
      "serverId": "f33910f19b7abb192b83adbd000000bf"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2a117ae9_e88de309",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000534
      },
      "writtenOn": "2022-06-23T21:29:07Z",
      "side": 1,
      "message": "\u003e Patch Set 1: Code-Review-1\n\u003e \n\u003e \"Build Failed \n\u003e \n\u003e https://ci.linaro.org/job/tcwg-abe-test/1352/ : Well ... it worked on my machine\"\n\n\u003e Patch Set 1: Code-Review-1\n\u003e \n\u003e \"Build Failed \n\u003e \n\u003e https://ci.linaro.org/job/tcwg-abe-test/1352/ : Well ... it worked on my machine\"\n\nThe failure happens because the value of the configure option that I added\nin my patch (“--with-auto-load-safe-path”) is correct in the 1st\nmanifest.txt¹, but wrong in the 2nd manifest.txt² (see “gdb_configure”\nline).\n\nThe difficulty is that the value of the configure option contains elements\nthat look like bash variables, but need to appear literally in the\nconfigure command line: “$debugdir:$datadir/auto-load”\n\nI managed to find a convoluted way of quoting the string so that the dollar\nsigns survive untouched until they are used to construct the configure\ncommand. Unfortunately this quoting strategy isn\u0027t working when\nabe-tests/test-manifest2.sh reads the manifest and attempts to reproduce\nthe build.\n\nI suspect the problem is in test-manifest2.sh. I\u0027m looking into it.\n\n-- \n\n¹ https://ci.linaro.org/job/tcwg-abe-test/1352/label\u003dtcwg-x86_64-build,test\u003dabe-tests/artifact/artifacts/orig-manifest1.txt\n2 https://ci.linaro.org/job/tcwg-abe-test/1352/label\u003dtcwg-x86_64-build,test\u003dabe-tests/artifact/artifacts/orig-manifest2.txt\n",
      "revId": "0db040934c6b7aeccb20e3a36ddfad8b88471238",
      "serverId": "f33910f19b7abb192b83adbd000000bf"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1cf7835e_a2485bfd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000534
      },
      "writtenOn": "2022-06-24T00:43:47Z",
      "side": 1,
      "message": "\u003e I suspect the problem is in test-manifest2.sh. I\u0027m looking into it.\n\nThe problem is actually in Abe itself, in lib/globals.sh:import_manifest().\nIt reads the gdb_configure line with a pipeline of $(grep … | cut … | tr …)\nwhich works fine, but then it evals what it has read, at which point\nthe “\u0027\u0027$\u0027debugdir:\u0027$\u0027datadir/auto-load” string loses its carefully\nconstructed quotations and transmutes into regular bash variables which of\ncourse aren\u0027t set and disappear by the time the configure flags are used.\n\nGetting to the point where it was possible to get a string containing\nliteral dollar signs to survive the innards of a bash script long enough to\nget to the configure command line has been like transporting an ice cream\nthrough the desert. I could keep trying to get the ice cream to its final\ndestination, but it doesn\u0027t seem like the best of ideas.\n\nSo I\u0027ll change tack and submit a patch to GDB adding a new configure flag\nthat simply adds to the default safe paths, so I won\u0027t need to pass\n“$debugdir:$datadir/auto-load/”. The disadvantage is that this will only be\navailable on the master branch and future GDB releases (or maybe I\u0027ll be\nable to get it accepted into the gdb-12-branch).\n\nOr perhaps create some Abe-specific substitution of some other character to represent a literal dollar sign, like import_manifest() does with \u0027%\u0027 to mean spaces.",
      "parentUuid": "2a117ae9_e88de309",
      "revId": "0db040934c6b7aeccb20e3a36ddfad8b88471238",
      "serverId": "f33910f19b7abb192b83adbd000000bf"
    }
  ]
}