%global DATE 2015.05 
%global gcc_version 4.9
%global tarbin gcc-linaro-4.9-2015.66-x86_64_aarch64-linux-gnu.tar.xz
%global snapshots /linaro/shared/snapshots
# Note, gcc_release must be integer, if you want to add suffixes to
# %{release}, append them after %{respin} on Release: line.
%global respin 1
# Turn off strip'ng of binaries
#%global __strip /bin/true
%global __os_install_post %{nil}
%global __check_files %{nil}
%global __elf_provides %{nil}
%global __elf_requires %{nil}
Prefix: /opt

Summary: Various compilers (C, C++, Objective-C, Java, ...)
Name: gcc
Version: %{gcc_version}
Release: %{respin}%{?dist}
# libgcc, libgfortran, libgomp, libstdc++ and crtstuff have
# GCC Runtime Exception.
License: GPLv3+ and GPLv3+ with exceptions and GPLv2+ with exceptions and LGPLv2+ and BSD
Group: Development/Languages
Source0: %{tarbin}
URL: http://www.linaro.org
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)/opt

%description
The gcc package contains the GNU Compiler Collection version 5.
You need this package in order to compile C code.

%package tcwg
Summary: Linaro Toolchain Working Group GCC release
Group: System Environment/Libraries
Autoreq: false

%description tcwg
This package contains the Linaro cross toolchain for ARMv7 or AARCH64

%prep
cp %{snapshots}/%{tarbin} %{_sourcedir}
mkdir -p %{_builddir}
tar --directory %{_builddir} -Jxf %{snapshots}/%{tarbin}
if [ $? -ne 0 ]; then
  exit $?
fi
#chmod -R a+rX,g-w,o-w %{_builddir}

%build

%install
rm -rf %{buildroot}
mkdir -p  %{buildroot}
cp -a * %{buildroot}/

%check

%clean
rm -rf %{buildroot}

%postun

%files tcwg
%defattr(-,root,root,-)
/*

%changelog
* Thu Jun 12 2015 Rob Savoye <rob.savoye@linaro.org>
- Now it sucessfully packages the binary tarball

* Mon Jun 1 2015 Rob Savoye <rob.savoye@linaro.org>
- Initial creation
